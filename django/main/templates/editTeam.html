{% extends "base.template.html" %}
{% block title %}Edit Team: {{team.name}} - The Refuge{% endblock %}

{% block content %}
<div class="row mainContent">
    <div class="col-sm-12 col-md-12">
        <br/>
        <h2>Team: {{team.name}}</h2>
        <h3>Current Members:</h3>
        <table class="table table-striped table-hover" id="currentMembersTable">
            <thead>  
                <tr>  
                    <th>Last</th>  
                    <th>First</th>
                    <th>Email</th>
                </tr>  
            </thead>
            <tbody>

            {% for client in teamMembers %}
                <tr>
                    <td><a href="/client/{{client.id}}/">{{client.lastName}}</a></td>  
                    <td>{{client.firstName}}</td>
                    <td>{{client.email}}</td>
                    <td><a class="btn btn-danger" href="/team/edit/{{team.id}}/remove/client/{{client.id}}/">Remove</a></td>
                </tr>

            {% empty %}
                <tr>
                    <td>None</td>  
                    <td>None</td>
                    <td>None</td>
                    <td>None</td>
                </tr>
            {% endfor %}

            </tbody>  
        </table>
        <br/>
        <h3>Add Members:</h3>
        <table class="table table-striped table-hover" id="notMembersTable">
            <thead>  
                <tr>  
                    <th>Last</th>  
                    <th>First</th>
                    <th>Email</th>
                </tr>  
            </thead>
            <tbody>

            {% for client in notTeamMembers %}
                <tr>
                    <td><a href="/client/{{client.id}}/">{{client.lastName}}</a></td>  
                    <td>{{client.firstName}}</td>
                    <td>{{client.email}}</td>
                    <td><a class="btn btn-primary" href="/team/edit/{{team.id}}/add/client/{{client.id}}/">Add</a></td>
                </tr>

            {% empty %}
                <tr>
                    <td>None</td>  
                    <td>None</td>
                    <td>None</td>
                    <td>None</td>
                </tr>
            {% endfor %}

            </tbody>  
        </table>
    </div>
</div>
{% endblock %}

{% block foot %}
<script>
$(document).ready(function() {

    $('#currentMembersTable tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });

    $('#notMembersTable tr').click(function() {
        var href = $(this).find("a").attr("href");
        if(href) {
            window.location = href;
        }
    });

});
</script>
{% endblock %}